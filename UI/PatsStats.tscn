[gd_scene load_steps=4 format=3 uid="uid://dp1aigj3yxb52"]

[ext_resource type="Theme" uid="uid://c76nakm2cvblr" path="res://main_theme.tres" id="1_q16tu"]
[ext_resource type="PackedScene" uid="uid://cjae333spf7fu" path="res://Objects/PatsIcon.tscn" id="2_54egh"]

[sub_resource type="GDScript" id="GDScript_io5qt"]
script/source = "extends PanelContainer

@onready var total = %Total
@onready var total_pats = %TotalPats
@onready var passive_income = %PassiveIncome

func _ready() -> void:
	update_pats_stats()
	SignalBus.pats_changed.connect(_pats_changed)
	SignalBus.pats_passive_income_changed.connect(_pats_passive_income_changed)

func _pats_changed(_value) -> void:
	update_pats_stats()

func _pats_passive_income_changed(_value) -> void:
	update_pats_stats()
	
func update_pats_stats() -> void:
	var pats = Global.pats_manager.pats
	var income = Global.pats_manager.passive_income
	total_pats.text = str(\"%s\" %pats)
	passive_income.text = str(\"%s per sec\" %income)
"

[node name="PatsStats" type="PanelContainer"]
offset_right = 63.0
offset_bottom = 40.0
theme = ExtResource("1_q16tu")
script = SubResource("GDScript_io5qt")

[node name="MarginContainer" type="MarginContainer" parent="."]
layout_mode = 2
theme_override_constants/margin_left = 5
theme_override_constants/margin_top = 0
theme_override_constants/margin_right = 5
theme_override_constants/margin_bottom = 2

[node name="GridContainer" type="GridContainer" parent="MarginContainer"]
layout_mode = 2
columns = 2

[node name="TotalPats" type="Label" parent="MarginContainer/GridContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 10
text = "0"

[node name="MarginContainer" type="MarginContainer" parent="MarginContainer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="HBoxContainer" type="HBoxContainer" parent="MarginContainer/GridContainer/MarginContainer"]
layout_mode = 2
theme_override_constants/separation = 2

[node name="PatsIcon" parent="MarginContainer/GridContainer/MarginContainer/HBoxContainer" instance=ExtResource("2_54egh")]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 4

[node name="Total" type="Label" parent="MarginContainer/GridContainer/MarginContainer/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
text = "pats"

[node name="PassiveIncome" type="Label" parent="MarginContainer/GridContainer"]
unique_name_in_owner = true
layout_mode = 2
text = "0 per sec"
